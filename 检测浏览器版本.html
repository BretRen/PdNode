<!DOCTYPE html>
<html>

<head>
  <title>检测浏览器版本</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    .message {
      padding: 20px;
      border-radius: 5px;
      margin: 20px auto;
      width: 80%;
      max-width: 600px;
    }

    .error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .info {
      background-color: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
  </style>
</head>

<body>
  <script>
    function getBrowserInfo() {
      const ua = navigator.userAgent;

      let browserName = "Unknown";
      let version = "Unknown";

      if (ua.indexOf("Edg/") > -1) {
        browserName = "Edge";
        version = ua.match(/Edg\/(\d+\.\d+)/)[1];
      } else if (ua.indexOf("Chrome/") > -1 && ua.indexOf("Edg/") === -1) {
        browserName = "Chrome";
        version = ua.match(/Chrome\/(\d+\.\d+)/)[1];
      } else if (ua.indexOf("Firefox/") > -1) {
        browserName = "Firefox";
        version = ua.match(/Firefox\/(\d+\.\d+)/)[1];
      } else if (ua.indexOf("Safari/") > -1 && ua.indexOf("Chrome/") === -1) {
        browserName = "Safari";
        version = ua.match(/Version\/(\d+\.\d+)/)[1];
      } else if (ua.indexOf("MSIE") > -1 || ua.indexOf("Trident") > -1) {
        browserName = "Internet Explorer";
        version = ua.match(/(?:MSIE |rv:)(\d+\.\d+)/)[1];
      } else {
        browserName = "Other";
      }

      return { browserName, version };
    }



    function checkBrowser() {
      const { browserName, version } = getBrowserInfo();
      const minVersions = {
        "Chrome": "80.0",
        "Firefox": "75.0",
        "Safari": "13.0",
        "Edge": "80.0",
        "Internet Explorer": "11.0"
      };

      let message = "";
      let messageClass = "";

      if (browserName === "Other") {
        message = "请使用支持的浏览器访问此页面。";
        messageClass = "error";
      } else {
        const minVersion = minVersions[browserName];
        if (minVersion) {
          const currentVersion = version.split('.')[0] + '.' + version.split('.')[1];
          if (parseFloat(currentVersion) < parseFloat(minVersion)) {
            message = `你的 ${browserName} 版本 ${version} 过低，请升级到最新版本。`;
            messageClass = "error";
          } else {
            message = `你的浏览器是 ${browserName} 版本 ${version}，可以正常使用。
              <br><br>五秒后跳转……<br><br>
              <p style="color:red;">请务必开启Cookies！
              否则无法正常跳转！</p>`;
            messageClass = "success";
            document.cookie = "IsGood=OK; path=/"
            setTimeout(() => window.location.pathname = "../../JS/练习/基础/数组-A1.html", 5000)
          }
        } else {
          message = `你的 ${browserName} 浏览器未在支持列表中。请使用主流浏览器。`;
          messageClass = "info";
        }
      }

      document.body.innerHTML = `<div class="message ${messageClass}">${message}</div>`;
    }

    checkBrowser();
  </script>
</body>

</html>